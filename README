
Step 1: Find a flight.
- Command:
	curl -H "Accept: application/json" -H "X-Apikey: 5512c8d59932b3da984cc7de" -H "Content-Type: application/json" -X GET "http://absst.almundo.it:8080/abs/flights/availability/itineraries?adults=1&from=BUE,MIA&to=MIA,BUE&departure=011216,241216&amount=10&site=ARG&channel=WEB&brand=ALMUNDO&language=es" > search_flight_response.json



Step 2: Select first flight of response response.flights[0].id.
- ID:
	"AMA|EZE-MIA(AR|AR|1306)M_2016-12-01_11:30_R@s=ARG_a=1_c=0_i=0|1479491325344*AMA|MIA-EZE(AR|AR|1305)M_2016-12-24_17:40_R@s=ARG_a=1_c=0_i=0|1479491325344"



Step 3: Create Cart for the flight.
- Command:
	curl -H "Accept: application/json" -H "X-Apikey: 5512c8d59932b3da984cc7de" -H "Content-Type: application/json" -X POST -d '{"products":[{"type":"FLIGHT","id":"AMA|EZE-MIA(AR|AR|1306)M_2016-12-01_11:30_R@s=ARG_a=1_c=0_i=0|1479491325344*AMA|MIA-EZE(AR|AR|1305)M_2016-12-24_17:40_R@s=ARG_a=1_c=0_i=0|1479491325344"}]}' "http://apiv2cart01st.almundo.it:8080/api/v2/cart/?site=ARG&language=es" > create_cart_response.json
- Response:
	{"cart_id":"582f26b4e4b0942a87581dd2"}



Step 4: Checkout cart using cart_id.
- Command:
	curl -H "Accept: application/json" -H "X-Apikey: 5512c8d59932b3da984cc7de" -H "Content-Type: application/json" -X GET "http://apiv2cart01st.almundo.it:8080/api/v2/cart/582f3f44e4b00a3ec6c020f8?site=ARG&language=es" > checkout_response.json
- Note:
	response.payments_methods.methods[n].id id the selected fop_id



Step 5: Get payment info for selected form of payment give a payer info.
- Request Body:
{
    "number": "4546571029477117",
    "thru": "07/18",
    "holder": "Cezar Garcia Mendez",
    "holder_identification": {
        "type": "DNI",
        "number": "12345678"
    },
    "billing": {
        "address": "Av Juan B Alberdi",
        "number": "337",
        "floor": "7",
        "apartment": "A",
        "postal_code": "1424",
        "city": "Capital Federal",
        "state": "Buenos Aires"
    }
}
- Command:
	curl -H "Accept: application/json" -H "X-Apikey: 5512c8d59932b3da984cc7de" -H "Content-Type: application/json" -X POST -d '{"number": "4546571029477117","thru": "07/18","holder": "Cezar Garcia Mendez","holder_identification": {"type": "DNI","number": "12345678"},"billing":{"address": "Av Juan B Alberdi","number": "337","floor": "7","apartment": "A","postal_code": "1424","city": "Capital Federal","state": "Buenos Aires"}}' "http://paymentsst.almundo.it:8080/payments/fop" > payment_info_response.json
- Response:
	response.id == payment_id



Step 6: Book and pay Cart
- Request Body:
{
  "billing": {
    "address": {
      "city": "Capital Federal",
      "number": "887",
      "postal_code": "1234",
      "state": "Buenos Aires",
      "street": "Pellegrini"
    },
    "document_type": "2326538",
    "fiscal_document": "20222222223",
    "fiscal_name": "TEST FLIGHTS",
    "fiscal_type": "2359313"
  },
  "contact": {
    "email": "test@almundo.com",
    "newsletter": true,
    "telephones": [
      {
        "area_code": "011",
        "country_code": "054",
        "number": "44445555",
        "telephone_type": "MOBILE"
      }
    ]
  },
  "passengers": [
    {
      "birthday": "01-01-1980",
      "document": {
        "document_type": "3047430",
        "number": "22222222"
      },
      "first_name": "JUAN IGNACIO",
      "gender": "M",
      "last_name": "TORETTO",
      "nationality": "ARG",
      "passenger_type": "ADULT"
    }
  ],
  "payment": {
    "payment_id": null,
    "payment_method": "582f3f58e4b03f1d07e460f4",
    "security_code": "1234"
  },
  "product_origin": "FLIGHT",
  "products_selection": [
    {
      "product_id": "AMA|EZE-MIA(AR|AR|1306)M_2016-12-01_11:30_R@s=ARG_a=1_c=0_i=0|1479491325344*AMA|MIA-EZE(AR|AR|1305)M_2016-12-24_17:40_R@s=ARG_a=1_c=0_i=0|1479491325344",
      "type": "FLIGHT"
    }
  ],
  "source": {
    "ip": "181.119.60.146"
  }
}


- Command:
	curl -H "Accept: application/json" -H "X-Apikey: 5512c8d59932b3da984cc7de" -H "Content-Type: application/json" -X POST -d '{"billing":{"address":{"city":"Capital Federal","number":"887","postal_code":"1234","state":"Buenos Aires","street":"Pellegrini"},"document_type":"2326538","fiscal_document":"20222222223","fiscal_name":"TEST FLIGHTS","fiscal_type":"2359313"},"contact":{"email":"test@almundo.com","newsletter":true,"telephones":[{"area_code":"011","country_code":"054","number":"44445555","telephone_type":"MOBILE"}]},"passengers":[{"birthday":"01-01-1980","document":{"document_type":"3047430","number":"22222222"},"first_name":"JUAN IGNACIO","gender":"M","last_name":"TORETTO","nationality":"ARG","passenger_type":"ADULT"}],"payment":{"payment_id":null,"payment_method":"582f3f58e4b03f1d07e460f4","security_code":"1234"},"product_origin":"FLIGHT","products_selection":[{"product_id":"AMA|EZE-MIA(AR|AR|1306)M_2016-12-01_11:30_R@s=ARG_a=1_c=0_i=0|1479491325344*AMA|MIA-EZE(AR|AR|1305)M_2016-12-24_17:40_R@s=ARG_a=1_c=0_i=0|1479491325344","type":"FLIGHT"}],"source":{"ip":"181.119.60.146"}}' "http://apist.almundo.it:8080/api/grondon/582f3e18e4b00a3ec6c020f7/book-reserve?site=ARG&language=es" > book_and_pay_response.json

